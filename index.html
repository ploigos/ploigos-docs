<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Documentation for Ploigos</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Documentation for Ploigos</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#ploigos-workflow">1. Ploigos - An Opinionated CI/CD Workflow</a>
<ul class="sectlevel2">
<li><a href="#ploigos-workflow-overview">1.1. Overview</a></li>
<li><a href="#ploigos-workflow-idea-delivery-high-level">1.2. Idea Delivery Workflow</a>
<ul class="sectlevel3">
<li><a href="#ploigos-workflow-idea-steps-assembly-ploigos">1.2.1. Idea Delivery Workflow Steps</a></li>
</ul>
</li>
<li><a href="#_cicd_process_workflow">1.3. CI/CD Process Workflow</a>
<ul class="sectlevel3">
<li><a href="#_minimum_workflow">1.3.1. Minimum Workflow</a></li>
<li><a href="#_typical_workflow">1.3.2. Typical Workflow</a></li>
<li><a href="#_everything_workflow">1.3.3. Everything Workflow</a></li>
<li><a href="#_detailed_workflow_step_descriptions">1.3.4. Detailed Workflow Step Descriptions</a></li>
<li><a href="#_workflow_source_files">1.3.5. Workflow Source Files</a></li>
</ul>
</li>
<li><a href="#ploigos-workflow-tools">1.4. Ploigos Workflow Tools</a></li>
</ul>
</li>
<li><a href="#_deploying_ploigos">2. Deploying Ploigos</a>
<ul class="sectlevel2">
<li><a href="#ploigos-workflow-infrastructure">2.1. Infrastructure Resources</a>
<ul class="sectlevel3">
<li><a href="#_ocp_platform_suggested_sizing">2.1.1. OCP Platform Suggested Sizing</a></li>
<li><a href="#_containerized_tool_suggested_sizing">2.1.2. Containerized Tool Suggested Sizing</a></li>
</ul>
</li>
<li><a href="#ploigos-reference-impl">2.2. Typical Workflow Deployment</a>
<ul class="sectlevel3">
<li><a href="#_prerequisites">2.2.1. Prerequisites</a></li>
<li><a href="#_planning_the_typical_workflow_deployment">2.2.2. Planning the Typical Workflow Deployment</a></li>
<li><a href="#_deploy_the_typical_workflow">2.2.3. Deploy the Typical Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ploigos-customize">3. Customizing the CI/CD Workflow</a>
<ul class="sectlevel2">
<li><a href="#ploigos-opinions-establish">3.1. Developing Opinions</a></li>
<li><a href="#ploigos-customize-workflow">3.2. Changing the Workflow</a></li>
<li><a href="#ploigos-customize-steprunner">3.3. Process for Adding/Changing a StepRunner</a></li>
<li><a href="#_creating_the_cloud_resources">3.4. Creating the Cloud Resources</a></li>
<li><a href="#_encrypting_secrets">3.5. Encrypting Secrets</a></li>
<li><a href="#ploigos-customize-container">3.6. Process for adding or changing a container image</a></li>
</ul>
</li>
<li><a href="#ploigos-contribute">4. Contributing</a>
<ul class="sectlevel2">
<li><a href="#ploigos-contribute-guide">4.1. Contribution Guide</a>
<ul class="sectlevel3">
<li><a href="#_adding_to_the_documentation">4.1.1. Adding to the Documentation</a></li>
<li><a href="#_building_the_documentation">4.1.2. Building the Documentation</a></li>
</ul>
</li>
<li><a href="#ploigos-contribute-subprojects">4.2. Reference list of subprojects</a></li>
</ul>
</li>
<li><a href="#ploigos-terms-definitions-ploigos">Appendix A: Ploigos Terms and Definitions</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="ploigos-workflow"><a class="anchor" href="#ploigos-workflow"></a><a class="link" href="#ploigos-workflow">1. Ploigos - An Opinionated CI/CD Workflow</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ploigos-workflow-overview"><a class="anchor" href="#ploigos-workflow-overview"></a><a class="link" href="#ploigos-workflow-overview">1.1. Overview</a></h3>
<div class="paragraph">
<p><em>What is Ploigos?</em></p>
</div>
<div class="paragraph">
<p>Ploigos is an opinionated workflow used to transform ideas into delivered
software in a production environment. Ploigos can be divided into two major
components: the Idea Delivery Workflow and the CI/CD Workflow.</p>
</div>
<div class="paragraph">
<p>The Idea Delivery Workflow is an abstract process workflow that defines a
high level view of how an organization can best take ideas that solve business
problems and implement the solution in a well defined procedure. This process
focuses on the specific actions that need to take place without identifying
specific tools for each step. Ploigos provides a general use Idea Delivery
Workflow that can be further customized to fit specific projects as needed. A
workflow first approach identifies the organizational behaviors and expected
outcomes to define what quality is. The workflow codifies and enforces
these to ensure all aspects of security, compliance, trust, and privacy
are addressed.</p>
</div>
<div class="paragraph">
<p>The CI/CD Workflow is the implementation of the software development portion
of the Idea Delivery Workflow. Ploigos creates a framework for a modular,
extensible, and opinionated CD/CD pipeline. Modularity and extensibility are
accomplished by defining one or more '<strong>Steps</strong>' in the CD/CD workflow, and
automating the <strong>Step</strong> by creating a <strong>StepImplementer</strong>. As part of fulfilling
the opinionated aspect, Ploigos provides a number of predefined Steps,
StepImplementers, and several CI/CD Workflows.</p>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-workflow-idea-delivery-high-level"><a class="anchor" href="#ploigos-workflow-idea-delivery-high-level"></a><a class="link" href="#ploigos-workflow-idea-delivery-high-level">1.2. Idea Delivery Workflow</a></h3>
<div class="paragraph">
<p>Ploigos defines a reference high level workflow that covers the process of
taking the genesis of an idea, idea development, integration, and review. In
this high level rendering of the Ploigos workflow, the majority of
steps are <em>Predefined Procedures</em>. These procedures are placeholders for more
complex sub workflows containing multiple Procedures, the details of which
are defined in later sections. This simplification allows for a 'one slide'
view of the workflow.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="images/ploigos/Ideation_Delivery_Workflow-vertical.png"><img src="images/ploigos/Ideation_Delivery_Workflow-vertical.png" alt="(Ploigos) Workflow - High Level"></a>
</div>
<div class="title">Workflow Image: Ploigos - High Level</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/Ideation_Delivery_Workflow-vertical.png">Vertical Rendering</a></p>
</li>
<li>
<p><a href="images/ploigos/Ideation_Delivery_Workflow-horizontal.png">Horizontal Rendering</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ploigos-workflow-idea-steps-assembly-ploigos"><a class="anchor" href="#ploigos-workflow-idea-steps-assembly-ploigos"></a><a class="link" href="#ploigos-workflow-idea-steps-assembly-ploigos">1.2.1. Idea Delivery Workflow Steps</a></h4>
<div class="paragraph">
<p>Each predefined process represents an encapsulation of steps that are
typically necessary in a complete end-to-end pipeline</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Prioritize Ideas</dt>
<dd>
<p>New ideas are placed in a work management tool, refined,
and prioritized. The work management tool allows for organization and
tracking of ideas as they move through the workflow. Steps will vary based
on existing organizational structure and specific tool chosen, but basic
requirements involve being able to: record new ideas, backlog management,
assign ideas to developers, and track progress and status.</p>
</dd>
<dt class="hdlist1">Development</dt>
<dd>
<p>The development procedure where an idea is implemented in
software. This includes an isolated development environment for developer
to begin coding.</p>
</dd>
<dt class="hdlist1">Create or Update Merge Request to Release Branch</dt>
<dd>
<p>The procedure for how merges
happen into the release branch in the source code repository. Deployment of
build artifacts into a temporary development environment that will occur when a
merge request is created (from a feature branch to the primary release branch),
and for any subsequent changes to the merging feature branch. Acceptance
of a merge request is automated, contingent on passing all gates defined
in the CI/CD pipeline for the merging branch, and passing all gates of the
CI/CD pipeline after the merge into the primary branch is complete.</p>
</dd>
<dt class="hdlist1">Detect Change</dt>
<dd>
<p>The procedure for detecting change in the source code
repository, and using that event to initiate appropriate action in the CI/CD
procedure. The event can be a change in a feature branch, release branch,
a new merge request, etc.</p>
</dd>
<dt class="hdlist1">CI/CD</dt>
<dd>
<p>Build artifacts are created and tested automatically on a continual
basis. This provides developers with the ability to make code changes
with instant (real-time) deployment of those changes into live development
runtime environment. An ability to bypass pipeline to reduce friction during
development on feature branches.  The detailed CI/CD Process Workflow section
provides more details on this predefined process.</p>
</dd>
<dt class="hdlist1">Retrospective</dt>
<dd>
<p>An introspection of the processes used by the team to
deliver the software to evaluate the effectiveness of the overall process
itself. Allows for modifying a predefined procedure or even modifying the
Idea Delivery Workflow itself based on team feedback.</p>
</dd>
<dt class="hdlist1">Peer Review</dt>
<dd>
<p>Collaborate with others in the process of reviewing code in
order to make sure it works, the code conforms to organizational coding
standards, and in order to improve the code where possible.</p>
<div class="ulist">
<ul>
<li>
<p>Mark Merge Request as Work In Progress (WIP)</p>
</li>
<li>
<p>Peer Review</p>
</li>
<li>
<p>Merge to Release Branch</p>
</li>
<li>
<p>Delete MR#-DEV Deployment Environment</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Release</dt>
<dd>
<p>Predefined process for how software is released.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cicd_process_workflow"><a class="anchor" href="#_cicd_process_workflow"></a><a class="link" href="#_cicd_process_workflow">1.3. CI/CD Process Workflow</a></h3>
<div class="paragraph">
<p>The CI/CD Process Workflow is broken down into 3 broad categories:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Minimal Workflow</dt>
<dd>
<p>Implements the fewest number of tools possible to still be
considered a CI/CD pipeline. This workflow is recommended for demo
presentations, and initial proof of concept evaluations.</p>
</dd>
<dt class="hdlist1">Typical Workflow</dt>
<dd>
<p>This workflow represents a typical CI/CD pipeline that
provides a standard tool suite and features that are commonly found in modern
CI/CD pipelines. Most workflows will start with the Typical Workflow as a
baseline.</p>
</dd>
<dt class="hdlist1">Everything Workflow</dt>
<dd>
<p>A workflow that uses all possible capabilities of
currently implemented steps in Ploigos. This workflow is used to showcase all
capabilities and for application development that requires stringent security
and testing capabilities that are not usually found in the Typical Workflow</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Each workflow type at minimum follows the process below and only differs in the
specific steps in the Setup, Continuous Integration(CI), and Continuous
Deployment(CD) stages.</p>
</div>
<div id="ploigos-workflow-process-image" class="imageblock">
<div class="content">
<a class="image" href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Processes-vertical.png"><img src="images/ploigos/Deployable_Unit_CI_CD_Workflow_Processes-vertical.png" alt="(Ploigos) Workflow - Processes"></a>
</div>
<div class="title">Workflow Image: Ploigos - Processes</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Processes-vertical.png">Vertical Rendering</a></p>
</li>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Processes-horizontal.png">Horizontal Rendering</a></p>
</li>
</ul>
</div>
<div id="ploigos-workflow-components-processes-level-assembly-ploigos" class="dlist">
<dl>
<dt class="hdlist1">Setup</dt>
<dd>
<p>Initial setup of the CI/CD pipeline. This step includes deployment and
configuration of a pipeline using Ploigos</p>
</dd>
<dt class="hdlist1">Continuous Integration</dt>
<dd>
<p>Development work that happens on the deployed CI/CD pipeline</p>
</dd>
<dt class="hdlist1">Continuous Deployment - DEV</dt>
<dd>
<p>Deployment of the application into a development environment for the developer
to review</p>
</dd>
<dt class="hdlist1">Continuous Deployment - TEST</dt>
<dd>
<p>Deployment of the application into the testing environment for functionality,
performance, and acceptance testing.</p>
</dd>
<dt class="hdlist1">Continuous Deployment - PROD</dt>
<dd>
<p>Deployment of the application into the production environment.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>References to the different workflows are defined in the
<a href="https://github.com/ploigos/ploigos-jenkins-library">ploigos-jenkins-library</a>
repository. This repository provides references examples of the Minimal,
Typical, and Everything Workflow.</p>
</div>
<div class="sect3">
<h4 id="_minimum_workflow"><a class="anchor" href="#_minimum_workflow"></a><a class="link" href="#_minimum_workflow">1.3.1. Minimum Workflow</a></h4>
<div id="ploigos-workflow-minimum-image" class="imageblock">
<div class="content">
<a class="image" href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Minimum-vertical.png"><img src="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Minimum-vertical.png" alt="(Ploigos) Workflow - Minimum"></a>
</div>
<div class="title">Workflow Image: Ploigos - Minimum</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Minimum-vertical.png">Vertical Rendering</a></p>
</li>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Minimum-horizontal.png">Horizontal Rendering</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_minimum_workflow_steps"><a class="anchor" href="#_minimum_workflow_steps"></a><a class="link" href="#_minimum_workflow_steps">Minimum Workflow Steps</a></h5>
<div class="paragraph">
<p>The following steps are part of the Minimum Workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Detect Change</p>
<div class="ulist">
<ul>
<li>
<p><a href="#detect-detect">Detect new/changed/merged Branches</a></p>
</li>
<li>
<p><a href="#detect-start">Start CI/CD Workflow for Changed Branch</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Setup</p>
<div class="ulist">
<ul>
<li>
<p><a href="#setup-steprunner">Setup Workflow StepRunner</a></p>
</li>
<li>
<p><a href="#setup-pgpkeys">Setup PGP Keys</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Integration</p>
<div class="ulist">
<ul>
<li>
<p><a href="#ci-metadata">Generate Metadata</a></p>
</li>
<li>
<p><a href="#ci-packageart">Package Application Artifact</a></p>
</li>
<li>
<p><a href="#ci-pushart">Push Application Artifact to Repository</a></p>
</li>
<li>
<p><a href="#ci-buildimg">Create Container Image</a></p>
</li>
<li>
<p><a href="#ci-pushimg">Push Container Image to Repository</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - DEV (Feature Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-dev">Deploy or Update to DEV Environment</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - TEST (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-test">Deploy or Update to TEST Environment</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - PROD (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-prod">Deploy or Update to PROD Environment</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Report</p>
<div class="ulist">
<ul>
<li>
<p><a href="#report-gen">Generate and Publish Workflow Report</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_typical_workflow"><a class="anchor" href="#_typical_workflow"></a><a class="link" href="#_typical_workflow">1.3.2. Typical Workflow</a></h4>
<div id="ploigos-workflow-typical-image" class="imageblock">
<div class="content">
<a class="image" href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Typical-vertical.png"><img src="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Typical-vertical.png" alt="(Ploigos) Workflow - Typical"></a>
</div>
<div class="title">Workflow Image: Ploigos - Typical</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Typical-vertical.png">Vertical Rendering</a></p>
</li>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Typical-horizontal.png">Horizontal Rendering</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following steps are part of the Typical Workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Detect Change</p>
<div class="ulist">
<ul>
<li>
<p><a href="#detect-detect">Detect new/changed/merged Branches</a></p>
</li>
<li>
<p><a href="#detect-start">Start CI/CD Workflow for Changed Branch</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Setup</p>
<div class="ulist">
<ul>
<li>
<p><a href="#setup-steprunner">Setup Workflow StepRunner</a></p>
</li>
<li>
<p><a href="#setup-pgpkeys">Setup PGP Keys</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Integration</p>
<div class="ulist">
<ul>
<li>
<p><a href="#ci-metadata">Generate Metadata</a></p>
</li>
<li>
<p><a href="#ci-tagsource">Tag Source Code</a></p>
</li>
<li>
<p><a href="#ci-unittest">Run Unit Tests</a></p>
</li>
<li>
<p><a href="#ci-packageart">Package Application Artifact</a></p>
</li>
<li>
<p><a href="#ci-staticcode">Run Static Code Analysis</a></p>
</li>
<li>
<p><a href="#ci-pushart">Push Application Artifact to Repository</a></p>
</li>
<li>
<p><a href="#ci-buildimg">Create Container Image</a></p>
</li>
<li>
<p><a href="#ci-staticimage-vuln">Run Static Image Scan: Vulnerability</a></p>
</li>
<li>
<p><a href="#ci-pushimg">Push Container Image to Repository</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - DEV (Feature Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-dev">Deploy or Update to DEV Environment</a></p>
</li>
<li>
<p><a href="#cd-uat">Run User Acceptance Tests(UAT)</a></p>
</li>
<li>
<p><a href="#cd-perf-limited">Run Performance Tests (limited)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - TEST (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-test">Deploy or Update to TEST Environment</a></p>
</li>
<li>
<p><a href="#cd-uat">Run User Acceptance Tests(UAT))</a></p>
</li>
<li>
<p><a href="#cd-perf-full">Run Performance Tests (full)</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - PROD (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-deploy-prod">Deploy or Update to PROD Environment</a></p>
</li>
<li>
<p><a href="#cd-canary">Run Canary Testing</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Report</p>
<div class="ulist">
<ul>
<li>
<p><a href="#report-gen">Generate and Publish Workflow Report</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_everything_workflow"><a class="anchor" href="#_everything_workflow"></a><a class="link" href="#_everything_workflow">1.3.3. Everything Workflow</a></h4>
<div id="ploigos-workflow-everything-image" class="imageblock">
<div class="content">
<a class="image" href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Everything-vertical.png"><img src="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Everything-vertical.png" alt="(Ploigos) Workflow - Everything"></a>
</div>
<div class="title">Workflow Image: Ploigos - Everything</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Everything-vertical.png">Vertical Rendering</a></p>
</li>
<li>
<p><a href="images/ploigos/Deployable_Unit_CI_CD_Workflow_Steps_-_Container_-_Everything-horizontal.png">Horizontal Rendering</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Everything Workflow uses all implemented steps in Ploigos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Detect Change</p>
<div class="ulist">
<ul>
<li>
<p><a href="#detect-detect">Detect new/changed/merged Branches</a></p>
</li>
<li>
<p><a href="#detect-start">Start CI/CD Workflow for Changed Branch</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Setup</p>
<div class="ulist">
<ul>
<li>
<p><a href="#setup-steprunner">Setup Workflow StepRunner</a></p>
</li>
<li>
<p><a href="#setup-pgpkeys">Setup PGP Keys</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Integration</p>
<div class="ulist">
<ul>
<li>
<p><a href="#ci-metadata">Generate Metadata</a></p>
</li>
<li>
<p><a href="#ci-tagsource">Tag Source Code</a></p>
</li>
<li>
<p><a href="#ci-unittest">Run Unit Tests</a></p>
</li>
<li>
<p><a href="#ci-packageart">Package Application Artifact</a></p>
</li>
<li>
<p><a href="#ci-staticcode">Run Static Code Analysis</a></p>
</li>
<li>
<p><a href="#ci-pushart">Push Application Artifact to Repository</a></p>
</li>
<li>
<p><a href="#ci-buildimg">Create Container Image</a></p>
</li>
<li>
<p><a href="#ci-staticimage-comp">Run Static Image Scan: Compliance</a></p>
</li>
<li>
<p><a href="#ci-staticimage-vuln">Run Static Image Scan: Vulnerability</a></p>
</li>
<li>
<p><a href="#ci-pushimg">Push Container Image to Repository</a></p>
</li>
<li>
<p><a href="#ci-signimg">Sign Container Image</a></p>
</li>
<li>
<p><a href="#ci-attest">Generate, Publish, and Sign Evidence</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - DEV (Feature Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-audit">Audit Attestation</a></p>
</li>
<li>
<p><a href="#cd-deploy-dev">Deploy or Update to DEV Environment</a></p>
</li>
<li>
<p><a href="#cd-validate">Validate Environment Configuration</a></p>
</li>
<li>
<p><a href="#cd-uat">Run User Acceptance Tests(UAT)</a></p>
</li>
<li>
<p><a href="#cd-perf-limited">Run Performance Tests (limited)</a></p>
</li>
<li>
<p><a href="#cd-attest">Generate, Publish, and Sign Evidence</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - TEST (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-audit">Audit Attestation</a></p>
</li>
<li>
<p><a href="#cd-deploy-test">Deploy or Update to TEST Environment</a></p>
</li>
<li>
<p><a href="#cd-validate">Validate Environment Configuration</a></p>
</li>
<li>
<p><a href="#cd-uat">Run User Acceptance Tests(UAT))</a></p>
</li>
<li>
<p><a href="#cd-perf-full">Run Performance Tests (full)</a></p>
</li>
<li>
<p><a href="#cd-attest">Generate, Publish, and Sign Evidence</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Continuous Deployment - PROD (Release Branch)</p>
<div class="ulist">
<ul>
<li>
<p><a href="#cd-audit">Audit Attestation</a></p>
</li>
<li>
<p><a href="#cd-deploy-prod">Deploy or Update to PROD Environment</a></p>
</li>
<li>
<p><a href="#cd-validate">Validate Environment Configuration</a></p>
</li>
<li>
<p><a href="#cd-canary">Run Canary Testing</a></p>
</li>
<li>
<p><a href="#cd-attest">Generate, Publish, and Sign Evidence</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Report</p>
<div class="ulist">
<ul>
<li>
<p><a href="#report-gen">Generate and Publish Workflow Report</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_detailed_workflow_step_descriptions"><a class="anchor" href="#_detailed_workflow_step_descriptions"></a><a class="link" href="#_detailed_workflow_step_descriptions">1.3.4. Detailed Workflow Step Descriptions</a></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Detect Change</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Detect new/changed/merged branches<a id="detect-detect"></a></p>
<div class="literalblock">
<div class="content">
<pre>To bring an idea from development into a release (and ultimately production)
a developer will create a merge request from feature branch to the primary
release branch. The merge request should initially be created as WIP, which
indicates this is a "Work in progress" and not yet ready to be merged. The act
of creating the merge request from a feature branch to the release branch
should trigger the pipeline to be run on the new feature branch.</pre>
</div>
</div>
</li>
<li>
<p>Start CI/CD Workflow for Changed Branch<a id="detect-start"></a></p>
<div class="literalblock">
<div class="content">
<pre>The capability of the CI tool to detect actions at the source control tool.
For actions "new merge request" or "changed merge request", the pipeline will
run and the subject will be feature branch being merged. For "merge of
feature branch to release branch" the pipeline will run and the subject will
be the primary release branch.</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Setup</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Setup Workflow StepRunner<a id="setup-steprunner"></a></p>
</li>
<li>
<p>Setup PGP Keys<a id="setup-pgpkeys"></a></p>
<div class="literalblock">
<div class="content">
<pre>Generate or import PGP keys that will be later used to cryptographically
sign container images and/or attestations.</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Continuous Integration</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Generate Metadata<a id="ci-metadata"></a></p>
<div class="literalblock">
<div class="content">
<pre>The pipeline will generate a semantic version based on other metadata,
to produce version and image tag to uniquely identify artifacts associated
with the pipeline run. This information gets applied to runtime artifacts
and container image as labels.</pre>
</div>
</div>
</li>
<li>
<p>Tag Source Code<a id="ci-tagsource"></a></p>
<div class="literalblock">
<div class="content">
<pre>This step will take the version created in the "Generate Metadata" step to
tag the source in source control.</pre>
</div>
</div>
</li>
<li>
<p>Run Unit Tests<a id="ci-unittest"></a></p>
<div class="literalblock">
<div class="content">
<pre>Validate that each module of the software performs as designed.</pre>
</div>
</div>
</li>
<li>
<p>Package Application Artifact<a id="ci-packageart"></a></p>
<div class="literalblock">
<div class="content">
<pre>Build runtime artifacts, distribution archives, and other necessary artifacts
required to run application.</pre>
</div>
</div>
</li>
<li>
<p>Run Static Code Analysis<a id="ci-staticcode"></a></p>
<div class="literalblock">
<div class="content">
<pre>The pipeline will perform static analysis on source code to identify
defects, vulnerabilities, programmatic and stylistic problems as early in
the development life cycle as possible. For example, static analysis is
completed prior to building, scanning and deploying the image.</pre>
</div>
</div>
</li>
<li>
<p>Push Application Artifact to Repository<a id="ci-pushart"></a></p>
<div class="literalblock">
<div class="content">
<pre>Transfer runtime artifacts into a centralized artifact repository for
distribution.</pre>
</div>
</div>
</li>
<li>
<p>Create Container Image<a id="ci-buildimg"></a></p>
<div class="literalblock">
<div class="content">
<pre>Assemble the minimal container image that the application will need to run,
including the packaged application artifacts. Test container images, verify
functionality, and validate the structure and content of the container
themselves.</pre>
</div>
</div>
</li>
<li>
<p>Run Static Image Scan: Compliance<a id="ci-staticimage-comp"></a></p>
<div class="literalblock">
<div class="content">
<pre>Ensure adherence to an organization's security compliance policy by your
container image.</pre>
</div>
</div>
</li>
<li>
<p>Run Static Image Scan: Vulnerability<a id="ci-staticimage-vuln"></a></p>
<div class="literalblock">
<div class="content">
<pre>Identify software vulnerabilities in your container image.</pre>
</div>
</div>
</li>
<li>
<p>Push Container Image to Repository<a id="ci-pushimg"></a></p>
<div class="literalblock">
<div class="content">
<pre>Transfer the verified image to centralized repository with metadata applied
as labels to the image.</pre>
</div>
</div>
</li>
<li>
<p>Sign Container Image<a id="ci-signimg"></a></p>
<div class="literalblock">
<div class="content">
<pre>Sign the container image to allow validating image source and ensure image has
not been tampered with.</pre>
</div>
</div>
</li>
<li>
<p>Generate, Publish, and Sign Evidence<a id="ci-attest"></a></p>
<div class="literalblock">
<div class="content">
<pre>Generates, publishes, and signs evidence output by all previous steps up to
this point. Used later for attestation gates.</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Continuous Deployment</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Audit Attestation<a id="cd-audit"></a></p>
<div class="literalblock">
<div class="content">
<pre>Evaluates the evidence generated up to this point against a given set of
attestations.</pre>
</div>
</div>
</li>
<li>
<p>Deploy or Update to DEV Environment<a id="cd-deploy-dev"></a></p>
<div class="literalblock">
<div class="content">
<pre>Provide a temporary environment for deployment of code changes associated with
a feature. If the environment does not already exist, the environment will
be created.  The lifetime of the environment is limited to the time it takes
to implement the feature and merge the changes into the release branch of the
primary code repository. At which point the development environment will
be deleted.</pre>
</div>
</div>
</li>
<li>
<p>Deploy or Update to TEST Environment<a id="cd-deploy-test"></a></p>
<div class="literalblock">
<div class="content">
<pre>Deploy image built from the latest release branch to the test environment.</pre>
</div>
</div>
</li>
<li>
<p>Deploy or Update to PROD Environment<a id="cd-deploy-prod"></a></p>
<div class="literalblock">
<div class="content">
<pre>Deploy tested application to shared production environment with latest feature
available to end users.</pre>
</div>
</div>
</li>
<li>
<p>Validate Environment Configuration<a id="cd-validate"></a></p>
<div class="literalblock">
<div class="content">
<pre>To validate the environment matches a given baseline of required objects, and
configuration of those objects are correct. Requirements for this step can
often come from an enterprise security and compliance team.</pre>
</div>
</div>
</li>
<li>
<p>Run User Acceptance Tests(UAT)<a id="cd-uat"></a></p>
<div class="literalblock">
<div class="content">
<pre>Assess if the system can support day-to-day business and user scenarios
and ensure the system is sufficient and correct for business usage.</pre>
</div>
</div>
</li>
<li>
<p>Run Performance Tests (limited)<a id="cd-perf-limited"></a></p>
<div class="literalblock">
<div class="content">
<pre>Evaluates the evidence generated up to this point against a given set of
attestations.</pre>
</div>
</div>
</li>
<li>
<p>Run Performance Tests (full)<a id="cd-perf-full"></a></p>
<div class="literalblock">
<div class="content">
<pre>To identify and eliminate the performance bottlenecks in the application.</pre>
</div>
</div>
</li>
<li>
<p>Run Canary Testing<a id="cd-canary"></a></p>
<div class="literalblock">
<div class="content">
<pre>Allows you to roll out new code/features to a subset of end-users as an
initial test.</pre>
</div>
</div>
</li>
<li>
<p>Generate, Publish, and Sign Evidence<a id="cd-attest"></a></p>
<div class="literalblock">
<div class="content">
<pre>Generates, publishes, and signs evidence output by all previous steps up to
this point. Used later for attestation gates.</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Report</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Generate and Publish Workflow Report<a id="report-gen"></a></p>
<div class="literalblock">
<div class="content">
<pre>Provide central dashboard with published test results as an indicator of
overall health of system</pre>
</div>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_workflow_source_files"><a class="anchor" href="#_workflow_source_files"></a><a class="link" href="#_workflow_source_files">1.3.5. Workflow Source Files</a></h4>
<div class="paragraph">
<p>While the rendered PNGs here are useful for starting the conversation and
stating clearly the opinionated Ploigos workflow, it is recognized that
every implementation of the Ploigos will be different. This includes the
tool abstracted workflow, as well as the specific tools used to implement it.</p>
</div>
<div class="paragraph">
<p>To facilitate ease of adoption, consistency, reuse, and
contribution back to the community, the workflows are all drawn
in the <a href="https://jgraph.github.io/mxgraph/">MXGraph</a> format using
<a href="https://draw.io/">Draw.io</a> and provided here for consumption, modification,
and reuse.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ploigos Workflows</p>
<div class="ulist">
<ul>
<li>
<p><a href="images/ploigos/ploigos_workflows.drawio">Draw.io - Compressed XML</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-workflow-tools"><a class="anchor" href="#ploigos-workflow-tools"></a><a class="link" href="#ploigos-workflow-tools">1.4. Ploigos Workflow Tools</a></h3>
<div class="paragraph">
<p>Once a Idea Delivery Workflow and CI/CD Process Workflow is established,
then the next task is to determine all of the types of components needed to
implement the workflow. This is done by ensuring each of the required
tool categories in the table below are being tracked as an item that is either
deployed or provided by a 3rd party.</p>
</div>
<div class="paragraph">
<p>Finally, choosing the actual component implementers (meaning the specific
software tools or products) can be performed. This section has components that
are dictated by the established Idea Delivery Workflow, CI/CD Process Workflow,
and the tool categories. Some of the categories below may be optional depending
on the workflow.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Component Implementers Overview</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tool Category</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">Component Implementers</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Platform</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Serves as runtime infrastructure for containers.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat OpenShift Container Platform (OCP)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identity Management</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Allows organization to manage identity and access of users and groups to
  enterprise resources to keep systems and data secure.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Identity Manager (IdM)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authentication</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>To verify the identity of a user or process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Single Sign-On (RH SSO) (KeyCloak)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authorization</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The use of access control rules to decide whether access requests from
  (authenticated) consumers shall be approved or disapproved.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat OpenShift Container Platform (OCP) with LDAP Group Sync from Red Hat Identity Manager (IdM)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Artifact Repository</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports pushing, pulling and storing of software artifacts/packages and
  accompanying meta data.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.sonatype.com/nexus/repository-oss-download">Sonatype Nexus OSS</a><br></p>
</li>
<li>
<p><a href="https://jfrog.com/artifactory/">Artifactory</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Registry</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Supports pushing, pulling and storing of OCI compliant images and
  accompanying meta data.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.sonatype.com/nexus/repository-oss-download">Sonatype Nexus OSS</a><br></p>
</li>
<li>
<p><a href="https://jfrog.com/artifactory/">Artifactory</a><br></p>
</li>
<li>
<p>Red Hat Quay (+ Clair)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Source Control</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Responsible for managing changes to source code.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://github.com/go-gitea/gitea">Gitea</a><br></p>
</li>
<li>
<p><a href="https://gitlab.com">GitLab</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Workflow Runner (Continuous Integration (CI))</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Automated tasks that verify new code’s correctness before integration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ploigos/ploigos-jenkins-library">Jenkins</a><br></p>
</li>
<li>
<p><a href="https://tekton.dev">tekton</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Static Code Analysis</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The analysis of software to catch defects, bugs, or security issues before
  actually executing the programs.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.sonarqube.org/">SonarQube</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Application Language Packager</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performs the process of binding relevant files and components together to
  create a consistent, standardized deliverable for a software application.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>maven<br></p>
</li>
<li>
<p>npm</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Application Language Unit Tester</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tools to support testing the smallest part or individual unit to determine
  if the component is fit for use.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>maven generating JUnit Report<br></p>
</li>
<li>
<p>npm generating JUnit Report</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Binary Artifact Uploader</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Pushes binary artifacts and accompanying metadata via network into a
  storage repository.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>maven<br></p>
</li>
<li>
<p>npm</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Builder</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Packages application into a binary OCI compliant image suitable to run
  inside any OCI compliant container platform.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://buildah.io/">buildah</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Uploader</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Pushes container image and accompanying metadata via network into a storage
  repository.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://github.com/containers/skopeo">skopeo</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Build Vulnerability Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Analysis on a container image&#8217;s packages and other dependencies to
  determine if there are any known vulnerabilities in those packages or
  dependencies.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>OpenSCAP</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Build Compliance Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Analysis on a container image&#8217;s packages and other dependencies to
  determine if there are any known compliance violations in those packages
  or dependencies.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>OpenSCAP</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Signer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cryptographically sign the container image for systems that require
  a verified signature on container images for deployment.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>podman</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Kubernetes Resources Creation Tool</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Creates the necessary Kubernetes resources needed to deploy and run an
  application inside a container platform.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://helm.sh">helm</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Continuous Deployer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Detects code changes and based on those changes, will automatically run
  pipeline to deploy code to chosen deployment environments.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://argoproj.github.io/argo-cd/">ArgoCD</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Environment Configuration Validator</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tool that validates the environment matches a given baseline of required
  objects, and configuration of those objects are correct.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://stelligent.github.io/config-lint/#/">config-lint</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>User Acceptance Tester (UAT)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tests to verify user-facing functionality and that the software meets
  real-world requirements.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Cucumber driving Selenium</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performance Tester</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tests software for performance issues.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runtime Application Vulnerability Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identifies vulnerabilities and scan your containers for malware at runtime
  (dynamic) as opposed to static analysis.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.zaproxy.org/">OWASP ZAP</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Canary Tester</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Allows slow roll-out of new code to a small subset of users to reduce the
  risk of introducing a new software version in production.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Cucumber driving Selenium</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Registry Vulnerability Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans container images in a registry for known vulnerabilities.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Claire</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Registry Compliance Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans container images in a registry for violations of
  organizational policy.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Platform Vulernability Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the container platform hosts and platform for vulnerabilities.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Red Hat Advanced Cluster Security (RHACS)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Runtime Vulnerability Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans running container for known vulnerabilities.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Image Runtime Compliance Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans running container images for violations of
  organizational policy.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Platform Vulnerability Enforcer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enforces polcies related to vulernabilities on the
  container platform</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Red Hat Advanced Cluster Security (RHACS)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Platform Compliance Scanner</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Scans the container platform and hosts for violations of
  organizational policy.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Red Hat Advanced Cluster Security (RHACS)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Container Platform Compliance Enforcer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enforces polcies related to compliance of organizational policy
  on the container platform</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Red Hat Advanced Cluster Security (RHACS)</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compliance and Validation Input Files Repository</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Repository that creates a central repoistory of compliance and validation
  configurations</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://github.com/go-gitea/gitea">Gitea</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Workflow Results Presentation</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Repository or GUI where results of the workflow</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.sonatype.com/nexus/repository-oss-download">Sonatype Nexus OSS</a><br></p>
</li>
<li>
<p><a href="https://jfrog.com/artifactory/">Artifactory</a><br></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Signed Container Enforcement</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>podman</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integrated Development Environment (IDE)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Provides a comprehensive suite of commonly used development functionality
  into a single application to assist developer&#8217;s efficiency and productivity.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://www.eclipse.org/che/">che</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Peer Review Tracker</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Facilitates and assists developers with management of the peer code review
  process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://github.com/go-gitea/gitea">Gitea</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Discussion</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A forum for debate and discussion to keep developers informed and aware of
  what is happening.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Mattermost</p>
</li>
<li>
<p>Confluence</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_ploigos"><a class="anchor" href="#_deploying_ploigos"></a><a class="link" href="#_deploying_ploigos">2. Deploying Ploigos</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ploigos-workflow-infrastructure"><a class="anchor" href="#ploigos-workflow-infrastructure"></a><a class="link" href="#ploigos-workflow-infrastructure">2.1. Infrastructure Resources</a></h3>
<div class="paragraph">
<p>The most basic requirement for the deployment of the Ploigos CI/CD Workflow is
an operational OCP 4.x cluster.</p>
</div>
<div class="sect3">
<h4 id="_ocp_platform_suggested_sizing"><a class="anchor" href="#_ocp_platform_suggested_sizing"></a><a class="link" href="#_ocp_platform_suggested_sizing">2.1.1. OCP Platform Suggested Sizing</a></h4>
<div class="paragraph">
<p>Below is the infrastructure used to develop and test the Minimum Viable
Product(MVP) of the Ploigos CI/CD Workflow Reference Implementation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Red Hat OpenShift Sizing</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">CPUs</th>
<th class="tableblock halign-left valign-top">Memory (GB)</th>
<th class="tableblock halign-left valign-top">Disk (GB)</th>
<th class="tableblock halign-left valign-top">AWS EC2 Instance Type</th>
<th class="tableblock halign-left valign-top">Sizing Source</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Control 0</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://docs.openshift.com/container-platform/latest/scalability_and_performance/recommended-host-practices.html#master-node-sizing_">OCP 4 Docs - Master Node Sizing</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Control 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://docs.openshift.com/container-platform/latest/scalability_and_performance/recommended-host-practices.html#master-node-sizing_">OCP 4 Docs - Master Node Sizing</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Control 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://docs.openshift.com/container-platform/latest/scalability_and_performance/recommended-host-practices.html#master-node-sizing_">OCP 4 Docs - Master Node Sizing</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compute 0</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Based on Containerized Tool Sizing needs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compute 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Based on Containerized Tool Sizing needs</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Compute 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>32</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>120</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>m4.2xlarge</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Based on Containerized Tool Sizing needs</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_containerized_tool_suggested_sizing"><a class="anchor" href="#_containerized_tool_suggested_sizing"></a><a class="link" href="#_containerized_tool_suggested_sizing">2.1.2. Containerized Tool Suggested Sizing</a></h4>
<div class="paragraph">
<p>Below is suggested initial sizing for tools commonly deployed with Ploigos</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Containerized Tool Sizing</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tool</th>
<th class="tableblock halign-left valign-top">CPUs</th>
<th class="tableblock halign-left valign-top">Memory (GB)</th>
<th class="tableblock halign-left valign-top">Sizing Source</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat SSO</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>WAG (<a href="https://access.redhat.com/solutions/3217681">Capacity planning, Sizing guide, Performance Tuning or Benchmarks for RH-SSO</a>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sonatype Nexus Repository Manager 3 OSS</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>16-32+</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://help.sonatype.com/repomanager3/installation/system-requirements">Sonatype Nexus Repository Manager 3 OSS - System Requirements</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JFrog Artifactory OSS - DB (PostgreSQL)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>WAG since <a href="https://www.jfrog.com/confluence/display/JFROG/System+Requirements#SystemRequirements-RecommendedHardware">JFrog Artifactory Docs - Recommended Hardware</a> provides no recommendation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Quay - Operator Based</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.2/html/deploy_red_hat_quay_-_basic/preparing_for_red_hat_quay_basic#prerequisites">Quay Docs - Preparing for Red Hat Quay Basic - Prerequisites</a><br></p>
</li>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_quay/3/html/deploy_red_hat_quay_on_openshift_with_quay_setup_operator/architecture">Operator and Quay Architecture</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Quay - Operator Based - DB (Crunchy Data PostgreSQL)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2 / Operator Governed</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>8 / Operator Governed</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Red Hat Clair</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tekton</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operator Governed</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Operator Governed</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a href="https://openshift.github.io/pipelines-docs/docs/0.10.5/assembly_installing-pipelines.html">Tekton Pipelines Docs - Github Pages for OpenShift 4</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jenkins Master</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>WAG based on experience.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jenkins Works</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Variable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Variable</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ArgoCD</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Worker images are 50Mb in size, API server is extremely small.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SonarQube</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>WAG since <a href="https://docs.sonarqube.org/latest/requirements/hardware-recommendations/">SonarQube official docs</a> offers no suggestion</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SonarQube DB (PostgreSQL)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>WAG since <a href="https://docs.sonarqube.org/latest/requirements/hardware-recommendations/">SonarQube official docs</a> offers no suggestion</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cucumber</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A (embedded in CI container)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>N/A (embedded in CI container)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-reference-impl"><a class="anchor" href="#ploigos-reference-impl"></a><a class="link" href="#ploigos-reference-impl">2.2. Typical Workflow Deployment</a></h3>
<div class="paragraph">
<p>The following guide shows how to deploy the reference implementation of the Ploigos Standard Workflow into an OCP 4.x cluster with a simple quarkus application as a demo.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a><a class="link" href="#_prerequisites">2.2.1. Prerequisites</a></h4>
<div class="ulist">
<ul>
<li>
<p>Operational OCP 4.x cluster</p>
<div class="ulist">
<ul>
<li>
<p>Non-FIPS</p>
</li>
<li>
<p>Access to Red Hat CDN, quay.io, and the OCP Operator Hub</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_planning_the_typical_workflow_deployment"><a class="anchor" href="#_planning_the_typical_workflow_deployment"></a><a class="link" href="#_planning_the_typical_workflow_deployment">2.2.2. Planning the Typical Workflow Deployment</a></h4>

</div>
<div class="sect3">
<h4 id="_deploy_the_typical_workflow"><a class="anchor" href="#_deploy_the_typical_workflow"></a><a class="link" href="#_deploy_the_typical_workflow">2.2.3. Deploy the Typical Workflow</a></h4>
<div class="sect4">
<h5 id="_deploy_a_workflow_with_the_ploigos_software_factory_operator"><a class="anchor" href="#_deploy_a_workflow_with_the_ploigos_software_factory_operator"></a><a class="link" href="#_deploy_a_workflow_with_the_ploigos_software_factory_operator">Deploy a Workflow with the Ploigos Software Factory Operator</a></h5>
<div class="paragraph">
<p>Follow <a href="https://github.com/ploigos/ploigos-software-factory-operator#quick-start">Ploigos Software Factory Operator - Quick Start</a>
to deploy the latest Software Factory Operator.</p>
</div>
</div>
<div class="sect4">
<h5 id="_deploy_a_workflow_with_existingmanually_installed_infrastructure"><a class="anchor" href="#_deploy_a_workflow_with_existingmanually_installed_infrastructure"></a><a class="link" href="#_deploy_a_workflow_with_existingmanually_installed_infrastructure">Deploy a Workflow with existing/manually installed Infrastructure</a></h5>
<div class="paragraph">
<p>The following section describes examples on how to deploy various
components on OCP.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deploy IDM</dt>
<dd>
<p>NOTE: Edit the following values: <code>Secret.stringData.admin.password</code>, <code>Service.spec.clusterIP</code>, <code>Route.spec.host</code>, <code>Pod.spec.env</code></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install containerized IdM</p>
<div class="literalblock">
<div class="content">
<pre>oc new-project idm
oc apply -f - &lt;&lt; EOF
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: freeipa-data-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: gp2
  resources:
    requests:
      storage: 10Gi
---
apiVersion: v1
kind: Secret
metadata:
  name: freeipa-server-password
stringData:
  admin.password: Secret123
---
apiVersion: v1
kind: Service
metadata:
  name: freeipa-server-service
spec:
  selector:
    app: freeipa-server
  clusterIP: &lt;idm_service_ip&gt;
  ports:
  - name: http
    port: 80
    targetPort: 80
  - name: https
    port: 443
    targetPort: 443
  - name: dns-udp
    port: 53
    protocol: UDP
    targetPort: 53
  - name: kerberos-tcp
    port: 88
    protocol: TCP
    targetPort: 88
  - name: kerberos-udp
    port: 88
    protocol: UDP
    targetPort: 88
  - name: kerberospw-udp
    port: 464
    protocol: UDP
    targetPort: 464
  - name: kerberospw-tcp
    port: 464
    protocol: TCP
    targetPort: 464
  - name: ldap-tcp
    port: 389
    protocol: TCP
    targetPort: 389
  - name: ldaps-tcp
    port: 636
    protocol: TCP
    targetPort: 636
---
kind: Route
apiVersion: route.openshift.io/v1
metadata:
  name: freeipa
spec:
  host: freeipa-idm.apps.&lt;cluster_domain&gt;
  to:
    kind: Service
    name: freeipa-server-service
    weight: 100
  port:
    targetPort: https
  tls:
    termination: passthrough
  wildcardPolicy: None
---
apiVersion: v1
kind: Pod
metadata:
  name: freeipa-server
  labels:
    app: freeipa-server
spec:
  restartPolicy: OnFailure
  containers:
  - name: freeipa-server
    image:  quay.io/freeipa/freeipa-server:centos-8-stream
    imagePullPolicy: IfNotPresent
    volumeMounts:
    - name: freeipa-server-data
      mountPath: /data
    ports:
    - containerPort: 80
      protocol: TCP
    - containerPort: 443
      protocol: TCP
    - containerPort: 53
      protocol: UDP
    - containerPort: 88
      protocol: TCP
    - containerPort: 88
      protocol: UDP
    - containerPort: 464
      protocol: TCP
    - containerPort: 464
      protocol: UDP
    - containerPort: 389
      protocol: TCP
    - containerPort: 636
      protocol: TCP
    env:
    - name: IPA_SERVER_HOSTNAME
      value: freeipa-idm.apps.&lt;cluster_domain&gt;
    - name: IPA_SERVER_IP
      value: &lt;idm_clusterIP&gt;
    - name: PASSWORD
      valueFrom:
        secretKeyRef:
          name: freeipa-server-password
          key: admin.password
    - name: IPA_SERVER_INSTALL_OPTS
      value: "-U -r CLUSTER.LOCAL --setup-dns --no-forwarders --no-ntp"
    readinessProbe:
      exec:
        command: [ "/usr/bin/systemctl", "status", "ipa" ]
      initialDelaySeconds: 60
      timeoutSeconds: 10
      periodSeconds: 10
      successThreshold: 1
      failureThreshold: 3
    volumes:
  - name: freeipa-server-data
    persistentVolumeClaim:
      claimName: freeipa-data-pvc
  - name: cgroups
    hostPath:
      path: /sys/fs/cgroup
EOF</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy Keycloak</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install SSO operator to SSO namespace as <code>keycloak-1</code></p>
</li>
<li>
<p>Obtain admin creds from secret <code>credential-keycloak-1</code></p>
</li>
<li>
<p>Setup SSO configuration for OCP</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create new client: Clients &#8594; Create</p>
<div class="literalblock">
<div class="content">
<pre>----
clientid: openshift
client protocol: openid-connect
----</pre>
</div>
</div>
</li>
<li>
<p>Edit client:</p>
<div class="literalblock">
<div class="content">
<pre>----
access type: confidential
valid redirect URIs:
 - https://console-openshift-console.apps.&lt;cluster_domain&gt;/*
 - https://oauth-openshift.apps.&lt;cluster_domain&gt;/*
web origins:
 - https://console-openshift-console.apps.&lt;cluster_domain&gt;
 - https://oauth-openshift.apps.&lt;cluster_domain&gt;
----</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Integrate with IDM</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configure &#8594; User Federation &#8594; add provider (ldap)</p>
<div class="literalblock">
<div class="content">
<pre>----
Vendor: Red Hat Directory Server
Connection URL: ldap://&lt;idm_ip&gt;:389
Users DN: cn=users,cn=accounts,dc=cluster,dc=local
Bind DN: cn=Directory Manager
Bind Credential: &lt;bind_secret&gt;
----</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Setup OCP for SSO configuration</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Administration &#8594; Cluster Settings &#8594; Global Configuration &#8594; OAuth  &#8594; Add OpenID Connect</p>
<div class="literalblock">
<div class="content">
<pre>----
name: sso
clientid: openshift
client secret: &lt;from SSO&gt;
issuer url: https://keycloak-sso.apps.&lt;cluster_domain&gt;/auth/realms/master
----</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy Jenkins</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Jenkins operator to <code>jenkins</code> namespace</p>
</li>
<li>
<p>Create Jenkins instance</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy Gitea</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add HelmChartRepository CR</p>
<div class="literalblock">
<div class="content">
<pre>----
oc apply -f - &lt;&lt; EOF
apiVersion: helm.openshift.io/v1beta1
kind: HelmChartRepository
metadata:
  name: gitea-charts
spec:
 # optional name that might be used by console
  name: gitea-charts
  connectionConfig:
    url: https://dl.gitea.io/charts/
EOF
----</pre>
</div>
</div>
</li>
<li>
<p>Switch to 'developer' view, create gitea namespace, install gitea using helm</p>
</li>
<li>
<p>Add 'anyuid' scc for Gitea deploy</p>
<div class="literalblock">
<div class="content">
<pre>----
oc adm policy add-scc-to-user anyuid -z default -n gitea`
----</pre>
</div>
</div>
</li>
<li>
<p>Create route for gitea http</p>
</li>
<li>
<p>Obtain admin user/pass from: <code>Workloads&#8594; statefulsets &#8594; gitea &#8594; environments &#8594; init container (configure-gitea)</code></p>
</li>
<li>
<p>Connecting Giteao to IdM:</p>
<div class="literalblock">
<div class="content">
<pre>----
#From the Gitea WebUI: Site Administration -&gt; Authentication Sources, add source
Auth Type: LDAP(Via BindDN)
Auth Name: idm
Security protocol: unencrypted
Host: &lt;IdM host ip&gt;
Port: 389
BindDN: cn=Directory Manager
Bind Passord: &lt;binddn secret&gt;
User Search Base: cn=users,cn=accounts,dc=cluster,dc=local
User Filter: (&amp;(objectClass=posixAccount)(uid=%s))
Email attribute: mail
----</pre>
</div>
</div>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To expose SSH functionality will require external loadbalancer and networking configuration
that is not available in some sandbox environments (ex: OpenTLC/RHPDS deployments)
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deploy Nexus</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Nexus Repository Operator</p>
</li>
<li>
<p>Add 'anyuid' scc for Nexus deploy <code>oc adm policy add-scc-to-user anyuid -z nxrm-operator-certified -n nexus</code></p>
</li>
<li>
<p>Create route to nexus http server</p>
</li>
<li>
<p>Login to nexus (admin/admin123)</p>
</li>
<li>
<p>Follow configuration wizard</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Disable anonymous access</p>
</li>
</ol>
</div>
</li>
<li>
<p>Add docker repository</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Configure docker repository for port 9001 (http)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Add OCP service for nexus docker (port 9001)</p>
</li>
<li>
<p>Add OCP route for nexus docker (https/edge &#8594; 9001)</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy ArgoCD</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install ArgoCD community operator</p>
</li>
<li>
<p>Create an instance of ArgoCD</p>
</li>
<li>
<p>Create route to argocd-server (passthrough)</p>
</li>
<li>
<p>Get admin password from secret (Secrets &#8594; argocd-1-cluster &#8594; admin.password)</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy SonarQube</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install sonarqube operator (redhatgov)</p>
</li>
<li>
<p>Create a sonarqube instance</p>
</li>
<li>
<p>Login and change password (default: admin/admin)</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Deploy ACS(StackRox)</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install ACS operator</p>
</li>
<li>
<p>Remove resource limit for stackrox project (if exists)</p>
</li>
<li>
<p>Deploy central</p>
</li>
<li>
<p>Create cluster bundle</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Stackrox UI &#8594; <code>Platform Configuration &#8594; integrations &#8594; cluster init bundle &#8594; New Integration</code></p>
</li>
<li>
<p>Generate and download kubernetes yaml</p>
</li>
<li>
<p>Apply yaml to cluster</p>
</li>
</ol>
</div>
</li>
<li>
<p>Deploy secured cluster</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ploigos-customize"><a class="anchor" href="#ploigos-customize"></a><a class="link" href="#ploigos-customize">3. Customizing the CI/CD Workflow</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ploigos-opinions-establish"><a class="anchor" href="#ploigos-opinions-establish"></a><a class="link" href="#ploigos-opinions-establish">3.1. Developing Opinions</a></h3>
<div class="paragraph">
<p>Ploigos is an opinionated software development and deployment workflow. The
Typical CI/CD workflow, as the provided suggested workflow to implement,
presents specific technology chosen based on industry popularity, feature
set, open source involvement, and proficiency by contributing members of
Ploigos. These considerations, and many more, may be evaluated by a particular
organization when deciding on specific component implementer within the
workflow.</p>
</div>
<div class="paragraph">
<p>Some other considerations that guide opinions established in this document are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The CI tool should be modular and easily replaceable.</p>
</li>
<li>
<p><a href="https://trunkbaseddevelopment.com/">Trunk Based Development</a>, instead of:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://nvie.com/posts/a-successful-git-branching-model/">git-flow</a></p>
</li>
<li>
<p><a href="https://guides.github.com/introduction/flow/">GitHub Flow</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>When creating merge requests, create feature branches on forks rather than
on the primary repository, to mirror the workflow of large open source
projects.</p>
</li>
<li>
<p>The "Release Branch" is the branch that goes into production.
The term "main" will be used to refer to the release branch. The name of
this branch may be different from team to team.  There are many different
naming conventions for a branch that goes to production
(e.g., master, trunk, release)</p>
</li>
<li>
<p>The minimum, and recommended, number of logical environments is</p>
<div class="ulist">
<ul>
<li>
<p><code>N</code> number of development environments, one per active feature branch</p>
</li>
<li>
<p>Test</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
</li>
<li>
<p>A "StepRunner" is the implementation of all the necessary work associated
with common steps in a CI/CD pipeline. Examples of step runners include:
package, tag source, unit test, etc. The implementation of the StepRunner
is abstracted away from the user, and available as reusable modules via
the ploigos-step-runner library.</p>
</li>
<li>
<p>For UAT test bed infrastructure (i.e., Selenium Grid), such infrastructure,
when possible, should be dynamically created on-demand (by
infrastructure-as-code) using a StepRunner from the ploigos-step-runner
library. There will be cases where UAT infrastructure already exists
in-house. In such cases, the use of preexisting/static infrastructure is
a supported alternative for UAT testing.  For example, if your company
already has an established deployment of Selenium Grid, that instance of
Selenium Grid can be used rather than have the framework dynamically stand
up additional instances.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-customize-workflow"><a class="anchor" href="#ploigos-customize-workflow"></a><a class="link" href="#ploigos-customize-workflow">3.2. Changing the Workflow</a></h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Forking the StepRunner and Jenkins Library</dt>
<dd>
<p>In order to customize the CI/CD workflow and how specific steps in that
workflow are configured, the first step is to clone and modify the source
code repositories that control the workflow operation. With Ploigos this
will be the <code>ploigos-jenkins-library</code> and <code>ploigos-step-runner</code> repositories.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In the following example, it will be demonstrated how to fork the official
<code>ploigos-step-runner</code> and <code>ploigos-jenkins-library</code> repositories to the Gitea
server hosted as part of the CI/CD Workflow, and update the reference
application to use the forked repositories.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the empty/bank repositories in Gitea with the following names:</p>
<div class="literalblock">
<div class="content">
<pre>ploigos-step-runner
ploigos-jenkins-library</pre>
</div>
</div>
</li>
<li>
<p>Clone the repositories:</p>
<div class="literalblock">
<div class="content">
<pre>git clone https://github.com/ploigos/ploigos-step-runner.git
git clone https://github.com/ploigos/ploigos-jenkins-library</pre>
</div>
</div>
</li>
<li>
<p>Update the cloned repository remote to point to the Gitea server</p>
<div class="literalblock">
<div class="content">
<pre>cd ploigos-jenkins-library
git remote rename origin github
git remote add origin https://&lt;repo_url&gt;/platform/ploigos-jenkins-library.git
git push -u origin main
git push --tags</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>cd ploigos-step-runner
git remote rename origin github
git remote add origin https://&lt;repo_url&gt;/platform/ploigos-step-runner.git
git push -u origin main
git push --tags</pre>
</div>
</div>
</li>
<li>
<p>Configure the Jenkinsfile for the reference application
to point to the new internal <code>ploigos-step-runner</code> (if using the Software
Factory Operator and the <code>mvn-reference-app</code> application)</p>
<div class="literalblock">
<div class="content">
<pre>//cicd/ploigos-software-factory-operator/Jenkinsfile
// Load the Ploigos Jenkins Library
library identifier: 'ploigos-jenkins-library@v0.21.0',
retriever: modernSCM([
    $class: 'GitSCMSource',
    remote: 'https://&lt;repo_url&gt;/platform/ploigos-jenkins-library.git'
])
// run the pipeline
ploigosWorkflowTypical(
    stepRunnerConfigDir: 'cicd/ploigos-software-factory-operator/ploigos-step-runner-config/',
    pgpKeysSecretName: 'ploigos-gpg-key',
    workflowServiceAccountName: 'jenkins',
    workflowWorkerImageDefault: 'quay.io/ploigos/ploigos-base:v0.21',
    workflowWorkerImageAgent: 'quay.io/ploigos/ploigos-ci-agent-jenkins:v0.21',
    workflowWorkerImageUnitTest: 'quay.io/ploigos/ploigos-tool-maven:v0.21',
    workflowWorkerImagePackage: 'quay.io/ploigos/ploigos-tool-maven:v0.21',
    workflowWorkerImageStaticCodeAnalysis: 'quay.io/ploigos/ploigos-tool-sonar:v0.21',
    workflowWorkerImagePushArtifacts: 'quay.io/ploigos/ploigos-tool-maven:v0.21',
    workflowWorkerImageContainerOperations: 'quay.io/ploigos/ploigos-tool-containers:v0.21',
    workflowWorkerImageContainerImageStaticVulnerabilityScan: 'quay.io/ploigos/ploigos-tool-openscap:v0.21',
    workflowWorkerImageDeploy: 'quay.io/ploigos/ploigos-tool-argocd:v0.21',
    workflowWorkerImageUAT: 'quay.io/ploigos/ploigos-tool-maven:v0.21',
    separatePlatformConfig: true,
    //updated section
    stepRunnerUpdateLibrary: true,
    stepRunnerLibSourceUrl: "git+​https://&lt;repo_url&gt;/platform/ploigos-step-runner.git@main"
)</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating or Updating the Workflow</dt>
<dd>
<p>Changes to the Ploigos CI/CD Workflow start in the <code>ploigos-jenkins-library</code>
repository. The repository container a <strong>vars/</strong> directory which defines the 3
common CI/CD workflows:</p>
<div class="ulist">
<ul>
<li>
<p><strong>ploigosWorkflowMinimal.groovy</strong> - Minimum Jenkins workflow</p>
</li>
<li>
<p><strong>ploigosWorkflowTypical.groovy</strong> - Typical Jenkins workflow (Recommended)</p>
</li>
<li>
<p><strong>ploigosWorkflowEverything.groovy</strong> - Jenkins workflow with all options
enabled</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Each groovy file is split into two primary sections: the <strong>WorkflowParams</strong>
which contains variables for the workflow that can be set in the application
Jenkinsfile, and the following section which defines the Jenkins <strong>pipeline</strong></p>
</div>
<div class="paragraph">
<p>When creating new pipelines, ensure that it contains at least the following stages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SETUP: Workflow Step Runner</strong>: this stage prepares the PGP keys for use
across all subsequent steps, and updates the Ploigos Step Runner if needed.</p>
</li>
<li>
<p><strong>CI: Generate Metadata</strong>: this stage gathers information about the git
repository that this workflow is being run against, as well as any metadata
that would be relevant for upcoming steps (e.g., information from the POM file
if this is a Maven build).</p>
</li>
<li>
<p><strong>CI: Tag Source Code</strong>: this stage tags the current commit and pushes it to
the git repo, allowing for traceability between code commits and the CI/CD
workflow results.</p>
</li>
<li>
<p>The reporting step (defined under <strong>pipeline.post.always</strong>) should be part of
every workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the new workflow, identify which environments will have deployments
(DEV/TEST/PROD) and ensure each environment has a <strong>stage('&lt;ENV&gt;')</strong> entry
defined. Substages under the <strong>stage(Continuous Integration)</strong> definition
can be customized to match the planned CI/CD Workflow.</p>
</div>
<div class="paragraph">
<p>Before removing the definition for a stage, take note of all variables that
are being used. If these variables are not used anywhere else in the file, the
variable declaration at the top of the file should be removed. While all
variables should be examined, the following are the main variables to watch
out for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>WORKFLOW_WORKER_</strong>*: these variables are used in the container() declaration.
Note that if a container is no longer used, its associated entry in
<strong>spec.containers</strong> entry can be removed as well.</p>
</li>
<li>
<p><strong>envName</strong>*: if any of the deployment steps are being removed, the associated
variable for environment name (e.g., <strong>envNameProd</strong>) can be removed.</p>
</li>
<li>
<p><strong>releaseGitRefPatterns</strong>: this variable is used in every deployment step; if
every deployment step is removed, this variable can be removed as well.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-customize-steprunner"><a class="anchor" href="#ploigos-customize-steprunner"></a><a class="link" href="#ploigos-customize-steprunner">3.3. Process for Adding/Changing a StepRunner</a></h3>
<div class="paragraph">
<p>Replacing an existing step (e.g., changing the <strong>package</strong> step to use npm) vs.
adding a new step (e.g., an organization specific compliance scan) are almost
identical, the only difference being how the process is started:</p>
</div>
<div class="paragraph">
<p>To replace the step implementer for an existing step in the process, first
locate that step&#8217;s configuration in the configuration files (config.yml and
config-secrets.yml by default).</p>
</div>
<div class="paragraph">
<p>Be sure to use <strong>sops</strong> to edit the secrets file; do not attempt to modify the
file directly.</p>
</div>
<div class="paragraph">
<p>Locate the existing configuration; in the example of changing the package
step from Maven to NPM:</p>
</div>
<div class="paragraph">
<p><strong>Step Implementer - Before</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>...
package:
- implementer: MavenPackage</pre>
</div>
</div>
<div class="paragraph">
<p>Replace the implementer with the new one:</p>
</div>
<div class="paragraph">
<p><strong>Step Implementer - After</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>...
package:
- implementer: NpmPackage</pre>
</div>
</div>
<div class="paragraph">
<p>If adding a new step implementer, simply add the step name and implementer into
the file. While it does not matter which order the stage is added, convention
is to add this configuration where it would belong in the actual pipeline
(e.g., deploy can be defined before build, but this severely reduces
readability of the file).</p>
</div>
<div class="paragraph">
<p><strong>Step Implementer - New</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>...
package:
- implementer: MitgComplianceCheck</pre>
</div>
</div>
<div class="paragraph">
<p>The implementer will automatically be picked up since the <strong>NpmPackage</strong> class
is defined under the package folder in the Ploigos Step Runner module. If the
implementation lives under a folder that does not match the step name, it can
be referenced using the fully qualified class name (e.g.,
<strong>ploigos_step_runner.step_implementers.shared.NpmGeneric</strong>). Once the desired
step implementer is defined, review that implement documentation to
determine the possible configuration options. Review the various "Configuration
Key" options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Required, no default value</strong>: This value must be set under the step
implementer config, otherwise the step will fail when the pipeline is run.</p>
</li>
<li>
<p><strong>Required, with default value</strong>: If the default value is not
acceptable/correct, the value must be overridden in the step implementer
config.</p>
</li>
<li>
<p><strong>Not required</strong>: These values are not required for every workflow, and can
therefore be left blank – but review each one to determine if it is required
for your particular workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the default values are acceptable, and no additional configuration is
required, there should be no config section for the implementer. Do not put
sensitive information in config.yaml; this information should be encrypted
using SOPS as part of config-secrets.yaml</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_cloud_resources"><a class="anchor" href="#_creating_the_cloud_resources"></a><a class="link" href="#_creating_the_cloud_resources">3.4. Creating the Cloud Resources<a id="customize-cloudresources"></a></a></h3>
<div class="paragraph">
<p>Currently, Ploigos utilizes a helm chart to set up the Kubernetes resources
required to run a pipeline, such as a ServiceAccount, with associated
RoleBinding and ClusterRole. As before with the Jenkins Library, this step will
involve copying from an existing template. In the case of the cloud resources,
however, an entirely new repository is required. The repository to copy from
is: <a href="https://github.com/ploigos/ploigos-charts">ploigos-charts</a></p>
</div>
<div class="paragraph">
<p>The simplest way to create a new repository for these cloud resources is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new repository in GitHub, naming it appropriately based on the
workflow (e.g., cloud-resources_jenkins_workflow_custom).</p>
</li>
<li>
<p>Create a new folder locally whose name matches that of the newly-created
repository.</p>
</li>
<li>
<p>Go into this folder on the command line and initialize the repository locally
using git init.</p>
</li>
<li>
<p>Create the initial branch (main):</p>
<div class="literalblock">
<div class="content">
<pre>git checkout -b main</pre>
</div>
</div>
</li>
<li>
<p>Copy all files and folders except for the .git folder from the reference
cloud resources project (linked above).</p>
</li>
<li>
<p>Create a remote linking this local repository to the remote repository</p>
<div class="literalblock">
<div class="content">
<pre>git remote add origin https://&lt;git_url&gt;/&lt;org_name&gt;/cloud-resources_jenkins_workflow_custom.git</pre>
</div>
</div>
</li>
<li>
<p>Push the changes to the remote</p>
<div class="literalblock">
<div class="content">
<pre>git push -u origin/main</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>With this repository created and the root commit pushed, create a branch for
defining the workflow – while not required, strongly consider using the
pattern feature/&lt;name&gt; for the branch name. On this branch, make the following
changes:</p>
</div>
<div class="paragraph">
<p><strong><span class="underline">Common Changes</span></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Determine if this workflow has any deployment steps. If not, delete the
folder <code>reference-quarkus-mvn-deploy</code>.</p>
</li>
<li>
<p>Rename the <code>reference-quarkus-mvn-workflow</code> folder to represent the new
workflow created above (e.g., build-only-workflow). Do the same for the
deploy folder, if it still exists.</p>
</li>
<li>
<p>Update the README to reflect the following:</p>
<div class="ulist">
<ul>
<li>
<p>Update the first two lines to reflect the purpose of these cloud resources</p>
</li>
<li>
<p>Replace all instances of <code>charts/reference-quarkus-mvn-workflow</code> with <code>charts/&lt;new-workflow-folder&gt;</code></p>
</li>
<li>
<p>Add any other notes that may be specific to these cloud resources, if any</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><span class="underline">Workflow Resources Changes</span></strong></p>
</div>
<div class="paragraph">
<p>Perform the following changes under the <code>charts/&lt;workflow-folder&gt;</code> directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the <strong>applicationName</strong> and <strong>serviceName</strong> values in values.yaml – these
values will determine the names of various Kubernetes resources that are
created, so be cognizant of Kubernetes' 63 character limit for various
resource names, and try to keep the combined length of these two strings to
under 32 characters.</p>
</li>
<li>
<p>Create a PGP private key for the pipeline and replace the contents of the
<strong>jenkins.key</strong> value in <strong>secrets.yaml</strong></p>
</li>
<li>
<p>Update <strong>Chart.yaml</strong> to update the version of
<code>ploigos-workflow-jenkins-resources</code>, if needed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong><span class="underline">Deployment Resources Changes</span></strong></p>
</div>
<div class="paragraph">
<p>If this workflow contains deployment steps, perform the following changes under
the <code>charts/&lt;deploy-folder&gt;</code> directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the description in <strong>Chart.yaml</strong> to reflect the intent of these
resources / its supporting workflow library</p>
</li>
<li>
<p>Update <strong>values.yaml</strong> with any values shared between all environments.</p>
</li>
<li>
<p>Delete the <code>values-*.yaml</code> files that are not a deployment target, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is only one target deployment environment, all of the values <em>could</em>
be put in a single values file, but this is not recommended. Instead, separate
values into whether or not they would be common or environment specific if
there was a second environment; this makes it easier to grow the workflow
later, and use it as a reference for other workflows. Once all of these changes
are made: add and commit the changes, push them up to the repository, and open
a merge request.</p>
</div>
<div class="paragraph">
<p>All of these changes could have been done as part of the initial root commit,
but this information was omitted in order to simplify the written instructions.
It is up to the implementer to determine if this should be one or two commits.</p>
</div>
</div>
<div class="sect2">
<h3 id="_encrypting_secrets"><a class="anchor" href="#_encrypting_secrets"></a><a class="link" href="#_encrypting_secrets">3.5. Encrypting Secrets</a></h3>
<div class="paragraph">
<p>Sensitive information, such as passwords and private encryption keys, should
always be encrypted at rest. This creates a challenge for automation
processes, since the tools involved require a secure means to access required
authentication credentials without user intervention.</p>
</div>
<div class="paragraph">
<p>The Ploigos workflow solves this problem using <a href="https://github.com/mozilla/sops">Mozilla SOPS</a>,
a powerful tool with a wide array of functionality for protecting secrets at
rest. A full explanation of its inner workings and functionality can be
reviewed in their documentation; this section aims to provide a high-level
overview of only the SOPS functionality that Ploigos takes advantage of for
encrypting sensitive information required for an automated pipeline run.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ploigos SOPS Functionality</dt>
<dd>
<p>A SOPS-encrypted file takes the form of a key/value(s) pair file
(e.g., JSON, INI); at the time of writing, Ploigos uses YAML for storing
configuration of reference applications, but there is no reason that JSON could
not be used instead.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The encrypted file is then stored in version control. The reference
architecture for the Ploigos ecosystem expects this file to reside in the
folder <code>cicd/ploigos-step-runner-config</code> (relative to the repository root
folder), though this can be modified by overriding the value for
<strong>stepRunnerConfigDir</strong>. The CI/CD workflow tool decrypts the values in this file
in order to gain access to authentication secrets (e.g., tokens, passwords,
keys) for various tools used across the pipeline. This removes the need for
user input and only authorized users are able to modify this file.</p>
</div>
<div class="paragraph">
<p>The keys from the configuration key/value pairs are unencrypted, which carries
two benefits. First, anyone with access to the file can see what values are
stored in the file, without gaining access to the values themselves. Also, it
is possible to use version control tooling (e.g., <code>git diff</code>) to individually
identify which values have been changed at any point in time.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The file will have multiple PGP keys associated: one for each dev trusted to
decrypt/modify values, plus one for each tool that needs to decrypt that secret
(e.g., the CI/CD workflow tool).
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">First Encryption</dt>
<dd>
<p>Before a SOPS-encrypted file can be created, a PGP public/private keypair is
required; see the section “Generating PGP Keys” below for how this will work.
Once a keypair is available, simply invoke the SOPS tool with the desired
filename as the only argument:</p>
<div class="literalblock">
<div class="content">
<pre>sops --pgp &lt;pgp-fingerprint&gt; my-config-secrets.yaml</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
PGP fingerprint is explicitly specified to ensure that the correct PGP key is
used; if multiple PGP keys exist, SOPS will use the first one it finds.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will open a text editor with a pre-generated YAML template. Fill in
configuration values as required, then save and quit. SOPS will automatically
encrypt the document. To see this in action, open the file through a standard
text editor (i.e., not through SOPS) and note that the following are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The configuration keys are unencrypted, but the configuration values are
encrypted.</p>
</li>
<li>
<p>There is a sops.pgp entry in the file with a fingerprint that matches the
fingerprint of the PGP keypair used to generate this file.</p>
</li>
</ul>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rotating Keys</dt>
<dd>
<p>When a SOPS-encrypted file is first created, only the user whose PGP public key
was used to encrypt the key (e.g., the user who created the file) can decrypt
the file. It will be necessary for multiple people to decrypt this file&#8201;&#8212;&#8201;at
a minimum, the originator of the file, and the automation tooling.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If values were encrypted with an individual developer’s private key, then only
that developer would be able to decrypt those values. Instead, a symmetric
encryption key is generated for encrypting configuration values, and that key
is then protected with the user’s PGP public key. This way, the key can be
encrypted multiple times using different PGP keys, allowing the owner of those
keys to also decrypt the key (and thus the configuration values in turn).</p>
</div>
<div class="paragraph">
<p>As a prerequisite to adding a public key to a SOPS-encrypted file, the user
performing the operation must already have:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Their own public key added to the file.</p>
</li>
<li>
<p>The public key of the user to be given permission to decrypt the file.</p>
</li>
<li>
<p>The public keys for all users who already have permission to decrypt the file
(e.g., whose keys were previously added to the file).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The method for sharing public keys is outside the scope of this document.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once these prerequisites are met, add the new PGP key using its fingerprint:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sops -r -i --add-pgp &lt;fingerprint&gt; some-secrets-file.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>To revoke a user’s permissions, use the same command as above, but replace
<code>--add-pgp</code> with <code>--rm-pgp</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Decrypting Configuration in the Pipeline</dt>
<dd>
<p>The larger purpose of this exercise has been to create a configuration file
that can be stored in version control and read in by a CI/CD workflow tool.
The last piece of this puzzle is setting up the workflow tool to be able to
decrypt these values.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><span class="underline">Generating the Workflow Runner Key</span></p>
</div>
<div class="paragraph">
<p>TODO: discuss generating public/private keypair for pipeline</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The public key needs to be distributed the same way that all the other keys
are; DO NOT LOSE IT! DELETE PRIVATE KEY FROM LOCAL MACHINE ONCE DONE!!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Just as various users’ keys are added to the SOPS-encrypted configuration to
be able to decrypt these values, the CI/CD workflow runner tool also requires a
PGP public/private keypair. A user will need to generate this keypair, but it
should only live on their machine temporarily; once this process is complete,
the private key must be deleted from the local machine. The public key should
be distributed the same way that all the other user’s public keys are.</p>
</div>
<div class="paragraph">
<p><span class="underline">Adding Key to Helm Chart</span></p>
</div>
<div class="paragraph">
<p>There is a Helm chart that will be run later in this process in order to
prepare a pipeline for a specific application; to prepare a Ploigos pipeline;
see the <a href="#customize-cloudresources">Create the Cloud Resources</a> section for
additional information.</p>
</div>
<div class="paragraph">
<p>The private key that was generated for the workflow tool needs to be loaded
into a SOPS-encrypted file within this helm chart. The default location for
storing the private key is:
<code>&lt;cloud-resources&gt;/charts/reference-quarkus-mvn-workflow/secrets.yaml</code></p>
</div>
<div class="paragraph">
<p>This file should be a SOPS-encrypted file (using PGP public keys from all users
 who should have access to this file) with the following content, placing the
PGP private key inline as appropriate:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>global:
  pgpKeys:
    tekton-tssc-references.key: |
      -----BEGIN PGP PRIVATE KEY BLOCK-----
      ...SNIPPED...
      -----END PGP PRIVATE KEY BLOCK-----</pre>
</div>
</div>
<div class="paragraph">
<p>Running this Helm chart requires human intervention, so only users’ PGP keys
should be added here. Once the cloud resources Helm chart is run, the output
will contain the name of the secret that was created to hold this PGP key
(e.g., <code>PGP Keys Secret: pgp-keys-ploigos-workflow-dms-child-support</code>).</p>
</div>
<div class="paragraph">
<p>The value for <code>pgpKeysSecretName</code> should be overridden in the Jenkinsfile to
reference this value. When the pipeline is run, this PGP private key will be
injected into the pod and imported, in order to decrypt pipeline configuration
values.</p>
</div>
<div class="paragraph">
<p>Note that this secret is protected so as to only be accessed by a
ServiceAccount with specific permissions; the workflow runner pod must be run
using the same permissions.</p>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-customize-container"><a class="anchor" href="#ploigos-customize-container"></a><a class="link" href="#ploigos-customize-container">3.6. Process for adding or changing a container image</a></h3>
<div class="paragraph">
<p>TODO</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ploigos-contribute"><a class="anchor" href="#ploigos-contribute"></a><a class="link" href="#ploigos-contribute">4. Contributing</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ploigos-contribute-guide"><a class="anchor" href="#ploigos-contribute-guide"></a><a class="link" href="#ploigos-contribute-guide">4.1. Contribution Guide</a></h3>
<div class="paragraph">
<p>This document implements the Red Hat Modular Documentation system. Full details of this documentation style can be found <a href="https://redhat-documentation.github.io/modular-docs/">HERE</a>. In addition, the chosen format for all documentation within this repository is Asciidoc. An Asciidoc quick reference can be found <a href="https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference">HERE</a></p>
</div>
<div class="paragraph">
<p>In summary, this modular documentation is based around the concept of dividing documentation content around user stories. Once the user stories are identified, each story is then developed into an <strong>Assembly</strong>. Each <strong>Assembly</strong> is made up of one or more of the 3 <strong>Module</strong> types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Concept Modules - Documentation sections for descriptions and explanations</p>
</li>
<li>
<p>Procedure Modules - Documentation in the form of procedures or step-by-step instructions</p>
</li>
<li>
<p>Reference Modules - Lists, tables, definitions and other information that users would need to reference</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_adding_to_the_documentation"><a class="anchor" href="#_adding_to_the_documentation"></a><a class="link" href="#_adding_to_the_documentation">4.1.1. Adding to the Documentation</a></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Automatic Asciidoc builds with GitHub Actions</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fork the documentation repository</p>
<div class="ulist">
<ul>
<li>
<p>Once the repository is forked, ensure GitHub actions is enabled for the repository to build and publish the documentation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Perform edits to the documentation</p>
<div class="ulist">
<ul>
<li>
<p>Follow the guidelines established by the Modular Documentation system</p>
<div class="ulist">
<ul>
<li>
<p>Refine existing user stories - modify existing documentation assemblies</p>
</li>
<li>
<p>Establish new user stories - add additional assemblies into the documentation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Review Changes in GitHub Pages</p>
</li>
<li>
<p>Submitting a pull request to the repository</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Manual/Local Build Process</dt>
<dd>
<p>Prerequisites:</p>
<div class="ulist">
<ul>
<li>
<p>Podman installed</p>
</li>
<li>
<p><code>quay.io/hdaems/podman-asciidoctor:1.1</code> image</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check out document repository <a href="https://github.com/ploigos/ploigos-docs.git">ploigos-docs</a></p>
</li>
<li>
<p>Perform edits</p>
</li>
<li>
<p>Build asciidocs</p>
<div class="literalblock">
<div class="content">
<pre>#make site directory
mkdir site/
#copy images into site/
cp -R images site/
#run sciidoctor container
podman run --user=&lt;userid&gt; --rm -v &lt;docs_repo&gt;:/documents:Z podman-asciidoctor asciidoctor -D site -o index.html master.adoc</pre>
</div>
</div>
</li>
<li>
<p>Open HTML file site/index.html</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_building_the_documentation"><a class="anchor" href="#_building_the_documentation"></a><a class="link" href="#_building_the_documentation">4.1.2. Building the Documentation</a></h4>
<div class="paragraph">
<p>This document repository is designed to use GitHub Actions to automatically generate a static HTML site using a container image with asciidoctor tools. The generated HTML is pushed back into the repository under the 'gh-pages' branch. Finally, The 'gh-pages' branch is published to GitHub Pages using a 3rd party GitHub Action <a href="https://github.com/JamesIves/github-pages-deploy-action">HERE</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The build action will only kick off on a push to the 'main' branch.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ploigos-contribute-subprojects"><a class="anchor" href="#ploigos-contribute-subprojects"></a><a class="link" href="#ploigos-contribute-subprojects">4.2. Reference list of subprojects</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/ploigos/ploigos-step-runner">ploigos-step-runner</a><br>
Python library that for the ploigos 'step-runner'. The step runner abstracts execution of each step in the defined pipeline by utilizing step implementers for defining the operation of specific tools</p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-software-factory-operator">ploigos-software-factory-operator</a><br>
Kubernetes/OCP operator for deploying the Ploigos platform (opinionated CI/CD pipeline)</p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-containers">ploigos-containers</a><br>
Repository for build files (podman) to build containers for ploigos, published to quay.io/ploigos</p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-charts">ploigos-charts</a><br>
Helm Charts for deploying Ploigos components to a kubernetes cluster</p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-roadmap">ploigos-roadmap</a></p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-jenkins-library">ploigos-jenkins-library</a><br>
Library for Jenkins that defines domain specific language for the implementation of the Ploigos workflow</p>
</li>
<li>
<p><a href="https://github.com/ploigos/ploigos-example-oscap-content">ploigos-example-oscap-content</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ploigos-terms-definitions-ploigos"><a class="anchor" href="#ploigos-terms-definitions-ploigos"></a><a class="link" href="#ploigos-terms-definitions-ploigos">Appendix A: Ploigos Terms and Definitions</a></h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Workflow</dt>
<dd>
<p>A Ploigos procedure as represented by a drawing.</p>
</dd>
<dt class="hdlist1">Workflow Abstraction</dt>
<dd>
<p>A Ploigos Workflow as represented by a drawing with no specified tooling to implement that steps of the workflow.</p>
</dd>
<dt class="hdlist1">Workflow Implementation</dt>
<dd>
<p>An implementation of a Ploigos Workflow Abstraction with specific tooling.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-10-06 17:52:19 UTC
</div>
</div>
</body>
</html>